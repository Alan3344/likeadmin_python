import{_ as x,D as S,C as h,v as R,t as U,F as N}from"./element-plus.ef27c94c.js";import{d as I,a as P,b as T,c as q}from"./department.f52cb313.js";import{P as O}from"./index.01c4da51.js";import{u as L}from"./useDictOptions.125db12a.js";import{f as X}from"./index.2f8bcc65.js";import{d as j,s as f,r as z,e as G,a1 as H,o as E,c as J,X as o,P as s,u as l,O as K,T as M,a as _}from"./@vue.a137a740.js";const Q={class:"edit-popup"},W=_("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),te=j({__name:"edit",emits:["success","close"],setup(Y,{expose:F,emit:m}){const i=f(),n=f(),p=z("add"),D=G(()=>p.value=="edit"?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),u=H({id:"",pid:"",name:"",duty:"",mobile:"",sort:0,isStop:0}),b={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]},{optionsData:V}=L({dept:{api:I}}),B=async()=>{var t,e;await((t=i.value)==null?void 0:t.validate()),p.value=="edit"?await P(u):await T(u),(e=n.value)==null||e.close(),X.msgSuccess("\u64CD\u4F5C\u6210\u529F"),m("success")},v=(t="add")=>{var e;p.value=t,(e=n.value)==null||e.open()},c=t=>{for(const e in u)t[e]!=null&&t[e]!=null?u[e]=t[e]:u[e]=t.is_stop},y=async t=>{const e=await q({id:t.id});c(e)},A=()=>{m("close")};return F({open:v,setFormData:c,getDetail:y}),(t,e)=>{const C=x,d=S,r=h,g=R,k=U,w=N;return E(),J("div",Q,[o(O,{ref_key:"popupRef",ref:n,title:l(D),async:!0,width:"550px",onConfirm:B,onClose:A},{default:s(()=>[o(w,{ref_key:"formRef",ref:i,model:l(u),"label-width":"84px",rules:b},{default:s(()=>[l(u).pid!==0?(E(),K(d,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:s(()=>[o(C,{class:"flex-1",modelValue:l(u).pid,"onUpdate:modelValue":e[0]||(e[0]=a=>l(u).pid=a),data:l(V).dept,clearable:"","node-key":"id",props:{value:"id",label:"name"},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data"])]),_:1})):M("",!0),o(d,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:s(()=>[o(r,{modelValue:l(u).name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(u).name=a),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",clearable:"",maxlength:100},null,8,["modelValue"])]),_:1}),o(d,{label:"\u8D1F\u8D23\u4EBA",prop:"duty"},{default:s(()=>[o(r,{modelValue:l(u).duty,"onUpdate:modelValue":e[2]||(e[2]=a=>l(u).duty=a),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D",clearable:"",maxlength:30},null,8,["modelValue"])]),_:1}),o(d,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:s(()=>[o(r,{modelValue:l(u).mobile,"onUpdate:modelValue":e[3]||(e[3]=a=>l(u).mobile=a),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u6392\u5E8F",prop:"sort"},{default:s(()=>[_("div",null,[o(g,{modelValue:l(u).sort,"onUpdate:modelValue":e[4]||(e[4]=a=>l(u).sort=a),min:0,max:9999},null,8,["modelValue"]),W])]),_:1}),o(d,{label:"\u90E8\u95E8\u72B6\u6001",prop:"isStop"},{default:s(()=>[o(k,{modelValue:l(u).isStop,"onUpdate:modelValue":e[5]||(e[5]=a=>l(u).isStop=a),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{te as _};
